<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="How to make a real fast replay mode" /><meta name="author" content="Timothée Pecatte" /><meta property="og:locale" content="en" /><meta name="description" content="This is the story of how I went from this (~1min for 80 replayed moves) :" /><meta property="og:description" content="This is the story of how I went from this (~1min for 80 replayed moves) :" /><link rel="canonical" href="https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/" /><meta property="og:url" content="https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/" /><meta property="og:site_name" content="BGA Developpers" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-18T16:33:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How to make a real fast replay mode" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Timothée Pecatte"},"description":"This is the story of how I went from this (~1min for 80 replayed moves) :","url":"https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/","@type":"BlogPosting","headline":"How to make a real fast replay mode","dateModified":"2021-11-19T10:58:41+01:00","datePublished":"2021-11-18T16:33:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/"},"@context":"https://schema.org"}</script><title>How to make a real fast replay mode | BGA Developpers</title><link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/blog/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/blog/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="BGA Developpers"><meta name="application-name" content="BGA Developpers"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/blog/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/blog/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/blog/" alt="avatar" class="mx-auto"> <img src="/blog/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/blog/">BGA Developpers</a></div><div class="site-subtitle font-italic">The tales of BGA game developpement</div></div><ul class="w-100"><li class="nav-item"> <a href="/blog/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/blog/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/blog/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/blog/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/blog/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/bga-devs" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['tim.pecatte','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/blog/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/blog/"> Home </a> </span> <span>How to make a real fast replay mode</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>How to make a real fast replay mode</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Timothée Pecatte </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Nov 18, 2021, 4:33 PM +0100" >Nov 18<i class="unloaded">2021-11-18T16:33:00+01:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Nov 19, 2021, 10:58 AM +0100" >Nov 19<i class="unloaded">2021-11-19T10:58:41+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1536 words">8 min read</span></div></div><div class="post-content"><p>This is the story of how I went from this (~1min for 80 replayed moves) : <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 184'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/replay_slow.gif" alt="Slow replay" width="575" height="184" /></p><p>to this (~8sec) :</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 184'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/replay_fastest.gif" alt="Replay on steroids" width="575" height="184" /></p><p>Before diving into code, maybe you are asking yourself:<br /> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 136'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/but_why.jpg" alt="But why?" width="200" height="136" /></p><p>Well, when you have a bug report at move 450 that needs more than 8min to reach, you start wondering why is fast mode not that fast :)</p><h1 id="fast-replay-mode">Fast replay mode</h1><p>Some players don’t know that feature, but once you enter a replay, you have access to a fast replay mode under the “advanced settings” link:<br /> <em>(let’s not get distracted by the fact that the link is translated while the menu is not…)</em></p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 241 64'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/enable_advanced.png" alt="Enable advanced settings" class="left" width="241" height="64" /> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 168 220'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/advanced_features.png" alt="Advanced settings" width="168" height="220" /></p><p>But what is this fast mode doing exactly? Diving into BGA framework’s code, we can find this:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nx">setModeInstataneous</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">savedSynchronousNotif</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">synchronous_notifs</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">leftright_page_wrapper</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">visibility</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">opacity</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">synchronous_notifs</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">synchronous_notifs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">synchronous_notifs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></table></code></div></div><p>Clicking on this button has the following consequences:</p><ul><li>setting <code class="language-plaintext highlighter-rouge">instantaneousMode = true</code>, which is used in <code class="language-plaintext highlighter-rouge">slideTo</code> to reduce the duration to 1, and in various other framework transition function (fadeOut, addToStock, …)<li>displaying the “loader_mask” element on top of everything else<li>reducing synchronous duration of notifications to 1</ul><p>This sounds like a great idea, so why is it still so slow? Let’s use the performance tool to see what is happening: <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 960 736'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/replay_perf.png" alt="Performance analysis" width="960" height="736" /> <em>(you can click on a row to have more details about which part of the code is corresponding to that row)</em></p><p>Here are the three main bottlenecks that might arises in any games:</p><ul><li>some notifications seems to take as much time as in normal slow mode<li>there are bunch of setTimeout floating around<li>there are a lot of style recalculation</ul><p>For experimenting while trying to solve these issues, it was convenient to have an helper function that I could switch on/off easily:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nx">isFastMode</span><span class="p">(){</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span><span class="p">;</span> <span class="c1">// true / false</span>
<span class="p">}</span>
</pre></table></code></div></div><p>That way, returning true would allow to use the normal step-by-step replay while mimicking the fast mode.</p><h1 id="improving-notifications">Improving notifications</h1><p>The framework is making all notifications synch timing to 1sec, which sounds good but has two flaws:</p><ul><li>if you are using non-framework animations, this can break you code as notifications will run one after the other without checking that the animation is over<li>if you are using dynamic synch timing (using <code class="language-plaintext highlighter-rouge">this.notifqueue.setSynchronousDuration</code>), then your notification will take the same time as in a normal slow replay</ul><p>So the first step was to make all the notifications fast-replay-compatible. For instance, we have this notification in Agricola when a player play a card that will zoom on the card, them zoom off to its location before resolving the notification, which is useless in fast mode. So I just add a bypass of the whole flow by checking the value of <code class="language-plaintext highlighter-rouge">isFastMode</code>:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre> <span class="nx">notif_buyCard</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">debug</span><span class="p">(</span><span class="dl">'</span><span class="s1">Notif: buying a card</span><span class="dl">'</span><span class="p">,</span> <span class="nx">n</span><span class="p">);</span>
   <span class="kd">let</span> <span class="nx">card</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">card</span><span class="p">;</span>
   <span class="kd">let</span> <span class="nx">duration</span> <span class="o">=</span> <span class="mi">700</span><span class="p">;</span>
   <span class="kd">let</span> <span class="nx">waitingTime</span> <span class="o">=</span> <span class="mi">80000</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">_cardAnimationSpeed</span><span class="p">;</span>

   <span class="c1">// Create the card if needed, and compute initial location of sliding event</span>
   <span class="kd">let</span> <span class="nx">exists</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
   <span class="kd">let</span> <span class="k">from</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">computeSlidingAnimationFrom</span><span class="p">(</span><span class="nx">card</span><span class="p">,</span> <span class="dl">'</span><span class="s1">cards-wrapper-</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">card</span><span class="p">.</span><span class="nx">pId</span><span class="p">);</span>

   <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isFastMode</span><span class="p">())</span> <span class="p">{</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">setSynchronousDuration</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
     <span class="c1">// Zoom on it, then zoom off</span>
     <span class="k">this</span><span class="p">.</span><span class="nx">zoomOnCard</span><span class="p">(</span><span class="nx">card</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="p">{</span> <span class="k">from</span><span class="p">,</span> <span class="nx">duration</span> <span class="p">})</span>
       <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="nx">waitingTime</span><span class="p">))</span>
       <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">zoomOffCard</span><span class="p">({</span> <span class="nx">duration</span> <span class="p">}))</span>
       <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">setSynchronousDuration</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
   <span class="p">}</span>
   <span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><p>I don’t like that much the fact that notification timing are hardcoded to 1 in this mode, so I made it more flexible by allowing the notifications to enforce their synch time if they need to:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="k">this</span><span class="p">.</span><span class="nx">_notifications</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">revealActionCard</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1100</span><span class="p">],</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">placeFarmer</span><span class="dl">'</span><span class="p">,</span> <span class="kc">null</span><span class="p">],</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">growChildren</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span>
  <span class="p">...</span>
<span class="p">];</span>

<span class="nx">setupNotifications</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_notifications</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_notifications</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">notif</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">functionName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">notif_</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">notif</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="kd">let</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">timing</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">functionName</span><span class="p">](</span><span class="nx">args</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timing</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">notif</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span>
            <span class="dl">"</span><span class="s2">A notification don't have default timing and didn't send a timing as return value : </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">notif</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Override default timing by 0 in case of fast replay mode</span>
        <span class="nx">timing</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">isFastMode</span><span class="p">()</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="nx">notif</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">timing</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">notifqueue</span><span class="p">.</span><span class="nx">setSynchronousDuration</span><span class="p">(</span><span class="nx">timing</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre></table></code></div></div><h1 id="making-the-flow-as-asynch-as-possible">Making the flow as asynch as possible</h1><p>Now let’s take care of these bunch of setTimeouts, which are coming from two main part in my case:</p><ul><li>sliding animations which have in a setTimeout with duration 1 for the <code class="language-plaintext highlighter-rouge">onEnd</code> listener -_-‘<li>counters????</ul><h2 id="improve-slide-function">Improve slide function</h2><p>All my slidings are usually the <code class="language-plaintext highlighter-rouge">attach: true</code> parameter of my <code class="language-plaintext highlighter-rouge">slide</code> functions which means: once the animation is over, attach the mobile element to the target and remove absolute positionning. What a waste of resources to do all that in fast-mode where it’s basically the same as just moving directly the node around:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="nx">slide</span><span class="p">(</span><span class="nx">mobileElt</span><span class="p">,</span> <span class="nx">targetElt</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="c1">// Mobile elt</span>
  <span class="nx">mobileElt</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">mobileElt</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">mobile</span> <span class="o">=</span> <span class="nx">mobileElt</span><span class="p">;</span>
  <span class="c1">// Target elt</span>
  <span class="nx">targetElt</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">targetElt</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">targetId</span> <span class="o">=</span> <span class="nx">targetElt</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">newParent</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">attach</span> <span class="p">?</span> <span class="nx">targetId</span> <span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">mobile</span><span class="p">).</span><span class="nx">parentNode</span><span class="p">;</span>

  <span class="c1">// Handle fast mode</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isFastMode</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">destroy</span> <span class="o">||</span> <span class="nx">config</span><span class="p">.</span><span class="nx">clearPos</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">destroy</span><span class="p">)</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">destroy</span><span class="p">(</span><span class="nx">mobile</span><span class="p">);</span>
    <span class="k">else</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">place</span><span class="p">(</span><span class="nx">mobile</span><span class="p">,</span> <span class="nx">targetElt</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">resolve</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="counters">Counters</h2><p>In Agricola, we are using a loooot of counters for scores, resources, …<br /> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 502'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/counters.png" alt="Resource counters" width="600" height="502" /></p><p>Inside notifications, we are using the <code class="language-plaintext highlighter-rouge">toValue</code> to have this nice animation while playing the game. But these animations are useless in fast mode! But shouldn’t the framework be handling this as for reducing the duration of slideTo function? Well it probably should, but it’s not doing it….</p><p>So let’s make our own by copying the existing one (and improve it to handle floating value as well). Instead of creating a dojo component, I just went a dirty way by creating an object on the fly with corresponding methods, please don’t puke while reading this:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="cm">/**
 * Own counter implementation that works with fast mode replay
 */</span>
<span class="nx">createCounter</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">defaultValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Counter : element does not exist</span><span class="dl">'</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">let</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">span</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">id</span><span class="p">),</span>
    <span class="na">targetValue</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">currentValue</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">speed</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="na">getValue</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">setValue</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">span</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="na">toValue</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">isFastMode</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span> <span class="o">!=</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">span</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter_in_progress</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">makeCounterProgress</span><span class="p">(),</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="na">incValue</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">m</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">toValue</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span> <span class="o">+</span> <span class="nx">m</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">makeCounterProgress</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">span</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">'</span><span class="s1">counter_in_progress</span><span class="dl">'</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">let</span> <span class="nx">step</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span><span class="p">)</span> <span class="o">/</span> <span class="mi">5</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span> <span class="o">+=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">targetValue</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">span</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentValue</span><span class="p">;</span>
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">makeCounterProgress</span><span class="p">(),</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span><span class="p">);</span>
    <span class="p">},</span>
  <span class="p">};</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">defaultValue</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
<span class="p">},</span>
</pre></table></code></div></div><p>This is the new speed after doing all these changes, pretty neat already: <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 184'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/replay_faster_counter.gif" alt="Nicer replay" width="575" height="184" /></p><h1 id="prevent-the-repaints">Prevent the repaints</h1><p>When looking to the perf tool, the main bottleneck seems to be style calculation, which is normal because we are moving a lot of stuff around.</p><blockquote><p>Wait, I’m not actually seeing everything moving around since it’s hidden beside the loading mask, so the browser should do that silently, right ?</p></blockquote><p>The answer is: that’s depend what <code class="language-plaintext highlighter-rouge">hidden</code> means. If we look back at <code class="language-plaintext highlighter-rouge">setModeInstataneous</code>, we can see that the function is doing this change of style of the main container:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">leftright_page_wrapper</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">visibility</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="p">);</span>
</pre></table></code></div></div><p>Hidding an element with this css property will keep it’s width/height so that means the browser has to recompute the styles to properly updates the width/height of this element, even if you can’t see it! The solution is pretty easy then, just use <code class="language-plaintext highlighter-rouge">display:none</code> instead! Actually, we will need a bit more work because the loading screen won’t have the proper height now that the main container is not longer displayed, which can be easily fixed by doing a cleaner loading screen solution:</p><div class="language-js highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">place</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">overall-content</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">before</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">height</span><span class="p">:</span> <span class="dl">'</span><span class="s1">100vh</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">position</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fixed</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">},</span>

<span class="c1">// Overwrite this to make display:none</span>
<span class="nx">setModeInstataneous</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">leftright_page_wrapper</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">opacity</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span>

<span class="c1">// Overwrite this to make display:block after fast mode is off</span>
<span class="nx">unsetModeInstantaneous</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">instantaneousMode</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">leftright_page_wrapper</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="dl">'</span><span class="s1">loader_mask</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">display</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></table></code></div></div><p>And now we finally get this much nicer speed: <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 184'%3E%3C/svg%3E" data-proofer-ignore data-src="/blog/assets/img/replay/replay_faster_style_computation.gif" alt="Even nicer replay" width="575" height="184" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/blog/categories/tips/'>Tips</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/blog/tags/replay/" class="post-tag no-text-decoration" >replay</a> <a href="/blog/tags/front/" class="post-tag no-text-decoration" >front</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How to make a real fast replay mode - BGA Developpers&url=https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How to make a real fast replay mode - BGA Developpers&u=https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=How to make a real fast replay mode - BGA Developpers&url=https://bga-devs.github.io/blog/blog/posts/a-real-fast-replay-mode/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/blog/posts/a-real-fast-replay-mode/">How to make a real fast replay mode</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/blog/tags/front/">front</a> <a class="post-tag" href="/blog/tags/replay/">replay</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/Syarwin">Timothée Pecatte</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/blog/tags/front/">front</a> <a class="post-tag" href="/blog/tags/replay/">replay</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/blog/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/blog/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/blog/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
